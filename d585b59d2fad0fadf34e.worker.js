!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n){let t;!function(){const e={};let n,r=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});r.decode();let o=null;function s(){return null!==o&&o.buffer===n.memory.buffer||(o=new Uint8Array(n.memory.buffer)),o}function i(e,n){return r.decode(s().subarray(e,e+n))}const a=new Array(32).fill(void 0);a.push(void 0,null,!0,!1);let l=a.length;function u(e){const n=function(e){return a[e]}(e);return function(e){e<36||(a[e]=l,l=e)}(e),n}let c=null;function f(){return null!==c&&c.buffer===n.memory.buffer||(c=new Int32Array(n.memory.buffer)),c}let p=null;function _(){return null!==p&&p.buffer===n.memory.buffer||(p=new Uint32Array(n.memory.buffer)),p}e.init=function(e){n.init(e)};let d=0,b=new TextEncoder("utf-8");const g="function"==typeof b.encodeInto?function(e,n){return b.encodeInto(e,n)}:function(e,n){const t=b.encode(e);return n.set(t),{read:e.length,written:t.length}};class w{static __wrap(e){const n=Object.create(w.prototype);return n.ptr=e,n}free(){const e=this.ptr;this.ptr=0,n.__wbg_explanation_free(e)}get start_line(){return n.__wbg_get_explanation_start_line(this.ptr)>>>0}set start_line(e){n.__wbg_set_explanation_start_line(this.ptr,e)}get start_column(){return n.__wbg_get_explanation_start_column(this.ptr)>>>0}set start_column(e){n.__wbg_set_explanation_start_column(this.ptr,e)}get end_line(){return n.__wbg_get_explanation_end_line(this.ptr)>>>0}set end_line(e){n.__wbg_set_explanation_end_line(this.ptr,e)}get end_column(){return n.__wbg_get_explanation_end_column(this.ptr)>>>0}set end_column(e){n.__wbg_set_explanation_end_column(this.ptr,e)}elaborate(){return u(n.explanation_elaborate(this.ptr))}title(){return u(n.explanation_title(this.ptr))}info(){n.explanation_info(8,this.ptr);var e=f()[2],t=f()[3],r=function(e,n){const t=_().subarray(e/4,e/4+n),r=[];for(let e=0;e<t.length;e++)r.push(u(t[e]));return r}(e,t).slice();return n.__wbindgen_free(e,4*t),r}}e.Explanation=w;class h{static __wrap(e){const n=Object.create(h.prototype);return n.ptr=e,n}free(){const e=this.ptr;this.ptr=0,n.__wbg_session_free(e)}constructor(e){var t=function(e,n,t){if(void 0===t){const t=b.encode(e),r=n(t.length);return s().subarray(r,r+t.length).set(t),d=t.length,r}let r=e.length,o=n(r);const i=s();let a=0;for(;a<r;a++){const n=e.charCodeAt(a);if(n>127)break;i[o+a]=n}if(a!==r){0!==a&&(e=e.slice(a)),o=t(o,r,r=a+3*e.length);const n=s().subarray(o+a,o+r);a+=g(e,n).written}return d=a,o}(e,n.__wbindgen_malloc,n.__wbindgen_realloc),r=d,o=n.session_new(t,r);return m.__wrap(o)}explore(e){try{var t=function(e,n){const t=n(4*e.length);return _().set(e,t/4),d=e.length,t}(e,n.__wbindgen_malloc),r=d;return n.session_explore(this.ptr,t,r)>>>0}finally{e.set(_().subarray(t/4,t/4+r)),n.__wbindgen_free(t,4*r)}}explain(e,t){var r=n.session_explain(this.ptr,e,t);return 0===r?void 0:w.__wrap(r)}}e.Session=h;class m{static __wrap(e){const n=Object.create(m.prototype);return n.ptr=e,n}free(){const e=this.ptr;this.ptr=0,n.__wbg_sessionresult_free(e)}session(){var e=this.ptr;this.ptr=0;var t=n.sessionresult_session(e);return 0===t?void 0:h.__wrap(t)}error_location(){n.sessionresult_error_location(8,this.ptr);var e=f()[2],t=f()[3];let r;var o,s;return 0!==e&&(r=(o=e,s=t,_().subarray(o/4,o/4+s)).slice(),n.__wbindgen_free(e,4*t)),r}error_message(){return u(n.sessionresult_error_message(this.ptr))}is_block(){return 0!==n.sessionresult_is_block(this.ptr)}}e.SessionResult=m,t=Object.assign((async function e(t){if(void 0===t){let e;e="undefined"==typeof document?location.href:document.currentScript.src,t=e.replace(/\.js$/,"_bg.wasm")}const r={wbg:{}};r.wbg.__wbindgen_string_new=function(e,n){return function(e){l===a.length&&a.push(a.length+1);const n=l;return l=a[n],a[n]=e,n}(i(e,n))},r.wbg.__wbindgen_object_drop_ref=function(e){u(e)},r.wbg.__wbindgen_throw=function(e,n){throw new Error(i(e,n))},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:o,module:s}=await async function(e,n){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,n)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}(await t,r);return n=o.exports,e.__wbindgen_wasm_module=s,n}),e)}(),e.exports=t},function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r);var s=t.p+"ffead070a7db3da6818212d5355c3514.wasm";const i="https://tzl3kczlk5.execute-api.us-east-1.amazonaws.com/default/explainer",a=()=>{},l=(e,n)=>{const t=n&&n.error||n,r=JSON.stringify({kind:e,nativeError:t instanceof Error,line:n&&n.lineno,column:n&&n.colno,message:n&&n.message||t&&t.message,filename:n&&n.filename,stack:t&&t.stack,raw:n});fetch(i,{method:"POST",body:r})};let u;self.addEventListener("error",e=>{l(null!=typeof window?"window.onerror":"self.onerror",e)}),a("workerMain");let c=void 0;const f={session:null,explanation:null,exploration:null};function p(e){c=null==e,o()(e||s).then(()=>{u=o.a,u.init(!c),postMessage({type:"ready",compiledModule:o.a.__wbindgen_wasm_module})}).catch(e=>l("wasm_bindgen",e))}function _(e){f.explanation&&(f.explanation.free(),f.explanation=null),f.explanation=f.session&&f.session.explain(e.line+1,e.ch)}function d(e){return null!=e?{start:{line:e.start_line-1,ch:e.start_column},end:{line:e.end_line-1,ch:e.end_column}}:null}function b(e){let n=[],t=null;return e.forEach(e=>{null==t?t={link:e}:(t.kind=e,n.push(t),t=null)}),n}self.onmessage=e=>{const{data:n}=e;switch(a(void 0===c?"":c?"Main":"Secondary","worker received",n.type,n),n.type){case"main-load":return void p(null);case"secondary-load":return void p(n.compiledModule);case"stop-exploration":return void(!c&&f.session&&(f.session.free(),f.session=null));case"compile":return void function(e){f.session&&(f.session.free(),f.session=null);const n=new u.Session(e),t=n.error_message(),r=n.error_location(),o=null!=t?{msg:t,start:{line:r[0]-1,ch:r[1]},end:{line:r[2]-1,ch:r[3]},isBlock:n.is_block()}:null;f.session=n.session(),f.error=o,c?postMessage({type:null!=f.session?"compiled":"compilation-error",error:f.error}):function e(n,t=!1){if(n!=f.session||null==f.session)return;t&&(f.exploration={buffer:new self.Uint32Array(2e3),result:[],byStart:new Map,start:Date.now()});const{buffer:r,result:o,byStart:s}=f.exploration,i=f.session.explore(r);for(let e=0;e<i;e++){const n={start:{line:r[4*e]-1,ch:r[4*e+1]},end:{line:r[4*e+2]-1,ch:r[4*e+3]}};s.has(n.start.line)||s.set(n.start.line,[]);s.get(n.start.line).some(e=>e.start.line===n.start.line&&e.start.ch===n.start.ch&&e.end.line===n.end.line&&e.end.ch===n.end.ch)||(s.get(n.start.line).push(n),o.push(n))}if(0===i)return a("Exploration finished..."),postMessage({type:"exploration",exploration:f.exploration.result}),f.session&&f.session.free(),f.session=null,void(f.exploration=null);g(()=>e(n))}(f.session,!0)}(n.source);case"get-hitbox":return void(c&&function(e){_(e),postMessage({type:"hitbox",location:d(f.explanation)})}(n.location));case"elaborate":return void(c&&function(e){_(e),function(){const e=f.explanation&&f.explanation.elaborate();postMessage({type:"elaboration",location:e&&d(f.explanation),elaboration:e,extraInfo:e&&b(f.explanation.info()),title:e&&f.explanation.title()})}()}(n.location));default:0,console.error("Unexpected message in worker",n)}};const g=(()=>{let e=new Map,n=0,t=new MessageChannel;return t.port1.onmessage=n=>{let t=n.data,r=e.get(t);e.delete(t),r()},r=>{let o=n;e.set(o,r),n++,t.port2.postMessage(o)}})()}]);