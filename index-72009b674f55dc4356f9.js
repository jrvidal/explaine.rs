!function(e){function n(n){for(var t,r,l=n[0],i=n[1],a=0,c=[];a<l.length;a++)r=l[a],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&c.push(o[r][0]),o[r]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);for(s&&s(n);c.length;)c.shift()()}var t={},o={1:0};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var l=new Promise((function(n,r){t=o[e]=[n,r]}));n.push(t[2]=l);var i,a=document.createElement("script");a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.src=function(e){return r.p+""+({}[e]||e)+"-"+{0:"e59bffdcffb1ea0e7414",3:"86d2a1d3d2c6bd31d421",4:"5c99513bb71e05d79eca"}[e]+".js"}(e);var s=new Error;i=function(n){a.onerror=a.onload=null,clearTimeout(c);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+l+")",s.name="ChunkLoadError",s.type=r,s.request=l,t[1](s)}o[e]=void 0}};var c=setTimeout((function(){i({type:"timeout",target:a})}),12e4);a.onerror=a.onload=i,document.head.appendChild(a)}return Promise.all(n)},r.m=e,r.c=t,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r.oe=function(e){throw console.error(e),e};var l=this.webpackJsonp=this.webpackJsonp||[],i=l.push.bind(l);l.push=n,l=l.slice();for(var a=0;a<l.length;a++)n(l[a]);var s=i;r(r.s=2)}([function(e,n,t){e.exports=function(){return new Worker(t.p+"d585b59d2fad0fadf34e.worker.js")}},,function(e,n,t){"use strict";t.r(n);const o="https://tzl3kczlk5.execute-api.us-east-1.amazonaws.com/default/explainers",r=()=>{},l=()=>fetch(o,{method:"POST"}),i=(e,n)=>{const t=n&&n.error||n,r=JSON.stringify({kind:e,nativeError:t instanceof Error,line:n&&n.lineno,column:n&&n.colno,message:n&&n.message||t&&t.message,filename:n&&n.filename,stack:t&&t.stack,raw:n});fetch(o,{method:"POST",body:r})};function a(e,n){let t={},o=null;return l=>{const i="function"==typeof l?l({...n.get(),...t}):l;r("setState: ",i),Object.assign(t,i),null==o&&(o=window.requestAnimationFrame(()=>(()=>{const r=Object.assign({},n.get(),t),l=n.get();n.set(r),t={},o=null,e(l)})()))}}function s(e){let n={_sentinel:{}};return t=>{const o=Object.keys({...n,...t}).some(e=>n[e]!==t[e]);n=t,o&&e(t)}}function c(e,n){e.classList.add(n)}function u(e,n){e.classList.remove(n)}function d(e,n){e.textContent=n}function m(e,n){e.innerHTML=n}function h(e,n){e.style.display=n}function p(e,n){let t=new window.URL(e),o=new window.URLSearchParams;return Object.entries(n).forEach(([e,n])=>{o.append(e,n)}),t.search="?"+o.toString(),t.toString()}function f(e,n){return e.line<n.line?-1:e.line>n.line?1:e.ch<n.ch?-1:e.ch>n.ch?1:0}function g(){let e=null,n=null;return{promise:new Promise((t,o)=>{e=t,n=o}),resolve:e,reject:n}}self.addEventListener("error",e=>{i(null!=typeof window?"window.onerror":"self.onerror",e)});var b=t(0),v=t.n(b);const w=e=>document.querySelector(e);const y={__sentinel:!0};function k(e){try{return localStorage.getItem(e)}catch(e){return M(e),y}}function x(e,n){try{localStorage.setItem(e,n)}catch(e){M(e)}}function M(e){i("storage",e)}const S=e=>document.querySelector(e);const E=({onNavigate:e,onOutsideClick:n})=>{const t=S(".missing-tooltip"),o=t.querySelector("code"),r=t.querySelector(".submit-issue");let l={missing:null};const i=a(()=>{!function({missing:e}){var n;(null!=e?c:u)(t,"visible"),d(o,null!==(n=null==e?void 0:e.code)&&void 0!==n?n:"")}({missing:l.missing})},{get:()=>l,set(e){l=e}});return r.addEventListener("click",n=>{n.preventDefault();const{code:t,location:o}=l.missing||{};if(!t||!o)return;const r=p("https://github.com/jrvidal/explaine.rs/issues/new",{labels:"missing-hint",title:"Missing Hint",body:["### What I expected","\x3c!-- What hint should we show here? What part of this syntax don't you understand? --\x3e","","### Source code","```",t,"```","",`Location: line ${o.line}, column ${o.ch}`].join("\n")});window.open(r,"_blank"),e()}),window.addEventListener("click",e=>{if(null==l.missing)return;let o=e.target;do{if(o==t)return;o=o.parentElement}while(null!=o);n()}),i};function I(){const e=S(".explanation"),n=e.querySelector(".loading"),t=e.querySelector(".loaded"),o=e.querySelector(".item-container"),r=o.querySelector(".item-title"),l=o.querySelector(".item"),i=o.querySelector(".error-message-container"),s=o.querySelector(".error-message"),p=e.querySelector(".file-bug"),f=e.querySelector(".do-file-bug"),g=l.innerHTML,b=r.innerHTML;let v={issueVisible:!1,error:null,compilationState:0,elaboration:null,missing:null};let w=null!=k("settings.reportDialog");const y=a(()=>{!function({error:e,compilationState:o,elaboration:a,missing:y}){h(n,0===o?"initial":"none"),h(t,0!==o?"initial":"none");const k=1===o&&null!=y;h(p,k?"block":"none"),(k&&!w?c:u)(f,"shake"),2===o?(m(r,"Oops! ðŸ’¥"),m(l,"There is a syntax error in your code:"),h(i,"block"),d(s,e.msg)):null!=a?(m(r,a.title),m(l,a.elaboration),h(i,"none")):(m(r,b),m(l,g),h(i,"none"),M({missing:v.issueVisible?v.missing:null}))}(v)},{get:()=>v,set(e){v=e}}),M=E({onNavigate(){y({issueVisible:!1})},onOutsideClick(){y({issueVisible:!1})}});return f.addEventListener("click",e=>{e.preventDefault(),x("settings.reportDialog","true"),w=!0,y({issueVisible:!v.issueVisible})}),e=>y(e)}function L(e,n,t){h(e,n?"block":"none"),e.querySelector("a").href=n?t(n):""}let q=Promise.all([t.e(0).then(t.t.bind(null,3,7)),Promise.all([t.e(0),t.e(4)]).then(t.t.bind(null,4,7)),Promise.all([t.e(0),t.e(3)]).then(t.t.bind(null,5,7))]);const T=window.document,O=e=>T.querySelector(e);l();const P="ontouchstart"in window;let C,V;c(T.body,P?"touch-device":"non-touch-device"),function({anchor:e,isTouchDevice:n,onChange:t,onMouseMove:o,onClick:r}){let l=q.then(([{fromTextArea:l}])=>{const i=l(e,{mode:"rust",lineNumbers:!0,theme:"solarized",readOnly:!!n&&"nocursor",indentUnit:4}),a=i.getWrapperElement();return i.on("change",(e,n)=>t(i,n)),a.addEventListener("mousemove",e=>o(i,e)),a.addEventListener("click",e=>r(i,e)),{cm:i,codemirrorEl:a}});return l.catch(e=>i("cmPromise",e)),l}({isTouchDevice:P,anchor:O(".codemirror-anchor"),onClick(){!function(){if(null!=B.pendingInitialElaboration)return;J(C.getCursor("from"))}()},onMouseMove(e,n){!function(e){if(1!==_.compilation.state)return;if(B.computedMarks)return void $(({compilation:n})=>({compilation:{...n,hoverEl:e.target}}));Y(e)}(n)},onChange(){B.compilationIndex+=1,$({compilation:D,address:null,empty:""===C.getValue().trim()}),z()}}).then(({cm:e,codemirrorEl:n})=>(C=e,V=n,function(e){let n=Promise.resolve();const t=new URLSearchParams(location.search);let o=t.get("code");const r=t.get("line"),l=t.get("ch");[...new window.URLSearchParams(location.search)].find(([e,n])=>"code"===e);o=null!=o?decodeURIComponent(o):null;const i=null!=r?Number(r):null,a=null!=l?Number(l):null;if(null!=o&&""!==o.trim()){e.setValue(o);const t=null!=i&&Number.isFinite(i)&&null!=a&&Number.isFinite(a)?{line:i,ch:a}:null;return B.pendingInitialElaboration=t,n}const s=k("code");if("string"==typeof s&&""!==s.trim())return e.setValue(s),n;return n="loading"===T.readyState?new Promise(e=>{T.addEventListener("DOMContentLoaded",()=>e())}):Promise.resolve(),n=n.then(()=>e.setValue(O(".default-code").value)),n}(C))).then(()=>{c(T.body,"codemirror-rendered"),$({editorReady:!0})});const j=function({onAddress:e,getValue:n}){const t=w(".generate"),o=w(".link");return t.addEventListener("click",()=>{const{code:t,location:o}=n()||{};if(null==t)return;let r=null==o?{code:t}:{code:t,line:String(o.line),ch:String(o.ch)};e(p(window.location.href,r))}),s((function({address:e,enabled:n}){t.disabled=!n,e?(h(t,"none"),u(o,"hidden"),o.href=e):(h(t,"initial"),c(o,"hidden"))}))}({onAddress(e){$({address:e})},getValue(){const e=C&&C.getValue();return null!=e?{code:e,location:B.lastElaborationRequest}:null}});!function(){const e=w(".modal"),n=w(".overlay");let t={showModal:!1};const o=a(o=>{t.showModal?(c(e,"show-modal"),c(n,"show-modal")):(u(e,"show-modal"),u(n,"show-modal"))},{get:()=>t,set(e){t=e}});w(".whats-this").addEventListener("click",()=>{o(({showModal:e})=>({showModal:!e}))}),n.addEventListener("click",()=>{o({showModal:!1})}),w(".close-modal").addEventListener("click",()=>{o({showModal:!1})})}();const A=function({onToggleEdit:e}){const n=w(".toggle-edit");return n.addEventListener("click",()=>{e()}),s(({enabled:e,editable:t})=>{n.disabled=!e,d(n,t?"Disable editing":"Enable editing")})}({onToggleEdit(){$(({editable:e})=>({editable:!e}))}}),R=function({onToggleShowAll:e}){const n=w(".show-all"),t=w(".show-all-text"),o=t.textContent;return n.addEventListener("click",()=>{e()}),s((function({showAll:e,enabled:r}){n.disabled=!r,(null!=e?c:u)(n,"show-all-loaded"),d(t,!0===e?"Hide elements":o)}))}({onToggleShowAll(){$(({compilation:e})=>({compilation:{...e,exploration:null!=e.exploration?{showAll:!e.exploration.showAll}:null}}))}}),N=function({getValue:e}){const n=w(".playground");return n.addEventListener("click",()=>{const n=e();null!=n&&window.open(p("https://play.rust-lang.org",{code:n,edition:"2018"}),"_blank")}),s((function({enabled:e}){n.disabled=!e}))}({getValue:()=>C&&C.getValue()}),W=function({onWrapInBlock:e}){const n=S(".explanation").querySelector(".more-info"),t=n.querySelector(".book-row"),o=n.querySelector(".keyword-row"),r=n.querySelector(".std-row"),l=n.querySelector(".reference-row"),i=n.querySelector(".nomicon-row"),a=n.querySelector(".unstable-row"),c=n.querySelector(".blog-row"),u=S(".info-wip"),d=function({onWrapInBlock:e}){const n=S(".can-be-block");return S(".wrap-in-block").addEventListener("click",()=>{e()}),({canBeBlock:e})=>{h(n,e?"block":"none")}}({onWrapInBlock:e}),m=I(),p=s(d),f=s((function({elaboration:e}){if(null!=e){const s=e.extraInfo.reduce((e,n)=>(e[n.kind]=n.link,e),{});h(n,"block"),L(t,s.book,e=>"https://doc.rust-lang.org/book/"+e),L(r,s.std,e=>"https://doc.rust-lang.org/std/"+e),L(o,s.keyword,e=>`https://doc.rust-lang.org/std/keyword.${e}.html`),L(l,s.reference,e=>"https://doc.rust-lang.org/reference/"+e),L(i,s.nomicon,e=>"https://doc.rust-lang.org/nomicon/"+e),L(a,s.unstable,e=>"https://doc.rust-lang.org/unstable-book/"+e),L(c,s.blog,e=>"https://blog.rust-lang.org/"+e),h(u,0!==e.extraInfo.length?"none":"initial")}else h(n,"none")})),g=s(m);return({elaboration:e,error:n,compilationState:t,missing:o})=>{p({canBeBlock:Boolean(n&&n.isBlock)}),f({elaboration:e}),g({error:n,compilationState:t,elaboration:e,missing:o})}}({onWrapInBlock(){if(null==C)return;const e=C.lineCount();for(let n=0;n<e;n++)C.indentLine(n,"add");C.replaceRange("fn main() {\n",{line:0,ch:0}),C.replaceRange("\n}",{line:e,ch:C.getLineHandle(e).text.length})}});let _={compilation:{state:0,hoverEl:null,hitbox:null,elaboration:null,exploration:null,error:null,missing:null},editable:!P,address:null,editorReady:!1,empty:!1};const D=_.compilation;let B={rules:0,mark:null,hoverMark:null,computedMarks:null,errorMark:null,errorContextMark:null,hoverIndex:null,compilationIndex:0,elaborationIndex:null,lastElaborationRequest:null,pendingInitialElaboration:null};const $=a(()=>{var e,n,t;const{compilation:o}=_;Q({hoverEl:o.hoverEl}),Z({error:o.error}),ee({elaboration:o.elaboration}),ne({hitbox:o.hitbox}),te({showAll:null!==(n=null===(e=o.exploration)||void 0===e?void 0:e.showAll)&&void 0!==n&&n,editable:_.editable}),W({elaboration:o.elaboration,error:o.error,compilationState:o.state,missing:o.missing}),j({address:_.address,enabled:_.editorReady}),A({editable:_.editable,enabled:_.editorReady}),R({showAll:!_.empty&&2!==o.state&&(null===(t=o.exploration)||void 0===t?void 0:t.showAll),enabled:null!=o.exploration}),N({enabled:!_.empty&&1===o.state})},{get:()=>_,set(e){_=e}});let{postMessage:U,ready:F}=function({onMessage:e}){const n=new v.a,t=new v.a;let{promise:o,resolve:l}=g(),{promise:a,resolve:s}=g(),c=Promise.all([o,a]);return n.onerror=e=>i("mainworker.onerror",e),n.onmessageerror=e=>i("mainworker.onmessageerror",e),t.onerror=e=>i("secondaryworker.onerror",e),t.onmessageerror=e=>i("secondaryworker.onmessageerror",e),n.onmessage=n=>{const{data:o}=n;if(r("Window received",o.type,o),"ready"===o.type)return l(null),void t.postMessage({type:"secondary-load",compiledModule:o.compiledModule});e(o)},t.onmessage=n=>{const{data:t}=n;r("Window received",t.type,t),"ready"!==t.type?e(t):s(null)},n.postMessage({type:"main-load"}),{postMessage:e=>{n.postMessage(e),t.postMessage(e)},ready:c}}({onMessage(e){switch(e.type){case"compiled":$({compilation:{...D,state:1}}),null!=B.pendingInitialElaboration&&(J(B.pendingInitialElaboration,!0),B.pendingInitialElaboration=null);break;case"compilation-error":$({compilation:{...D,state:2,error:e.error}});break;case"hitbox":$(({compilation:n})=>({compilation:{...n,hitbox:e.location}})),function(){if(B.computedMarks)return;X()}();break;case"elaboration":!function(e){if(B.compilationIndex!==B.elaborationIndex)return;const n=null==e.location?function({line:e,ch:n}){const t=/^ *$/;if(t.test(C.getLine(e)))return null;const o=Math.max(0,e-5),r=Math.min(C.lineCount()-1,e+5);let l=[...new Array(r-o+1)].map((e,n)=>C.getLine(o+n));const i=l.map(e=>{var n,o;return t.test(e)?Number.POSITIVE_INFINITY:null!==(o=null===(n=e.match(/^ */))||void 0===n?void 0:n[0].length)&&void 0!==o?o:0});let a=Math.min(...i);a=a===Number.POSITIVE_INFINITY?0:Math.min(a,n),a>0&&l.forEach((e,n)=>{t.test(e)||(l[n]=e.slice(a))});return l.forEach((e,n)=>{l[n]=`${String(n).padStart(2," ")} | ${e}`}),l.splice(e-o+1,0,`   | ${" ".repeat(n-a)}â†‘`),{code:l.join("\n"),location:{line:e-o,ch:n-a}}}(B.lastElaborationRequest):null;$(({compilation:t})=>({compilation:{...t,elaboration:null!=e.location?e:null,missing:n}}))}(e);break;case"exploration":!function(e){B.computedMarks=e.map(({start:e,end:n},t)=>oe({start:e,end:n},"computed-"+t));for(let n=B.rules;n<e.length;n++)H.insertRule(`.hover-${n} .computed-${n} { background: #e9deba; font-weight: bold; }`,H.cssRules.length);B.rules=Math.max(e.length,B.rules),B.hoverMark&&B.hoverMark.clear()}(e.exploration),$(({compilation:e})=>({compilation:{...e,exploration:{showAll:!1}}}));break;default:console.error("Unexpected message in window",e)}}});const H=(()=>{const e=T.createElement("style");return T.head.appendChild(e),e.sheet})();const z=(()=>{let e=!1,n=!1;return()=>{!n&&e||(e=!0,F.then(()=>{n=!0,function(){const e=C.getValue();x("code",e),B.lastElaborationRequest=null,""===e.trim()?$({compilation:{...D,state:1}}):(U({type:"stop-exploration"}),K(C.getValue()));const{computedMarks:n}=B;B.computedMarks=null,n&&requestAnimationFrame(()=>n.forEach(e=>e.clear()))}()}))}})();function J(e,n=!1){!n&&1!==_.compilation.state||_.empty||(B.elaborationIndex=B.compilationIndex,B.lastElaborationRequest=e,$({address:null}),U({type:"elaborate",location:e}))}const{debounced:Y,done:X}=function(e,n){let t=!0;const o={};let r=o,l=!1;const i=()=>{r!==o?l||(l=!0,window.setTimeout(()=>{l=!1;const n=r;r=o,e(n,i)},n)):t=!0};return{done:i,debounced(n){t?(t=!1,e(n,i)):r=n}}}((function({clientX:e,clientY:n},t){const{compilation:o}=_;if(1!==o.state)return t();let{line:r,ch:l}=C.coordsChar({left:e,top:n},"window");G({line:r,ch:l}),G.cached&&t()}),200),G=function(e,n){let t={},o=r=>{n(t,r)?(t=r,o.cached=!0):(t=r,o.cached=!1,e(r))};return o}((function({line:e,ch:n}){U({type:"get-hitbox",location:{line:e,ch:n}})}),(e,n)=>{if(e.line===n.line&&e.ch===n.ch)return!0;const{hitbox:t}=_.compilation;return null!=t&&(o=n,r=t.start,l=t.end,f(r,o)<=0&&f(o,l)<=0);var o,r,l});const K=function(e,n,t){let o,r,l,i,a,s;var c=0,u=!1,d=!1,m=!0;null!=t&&(u=!!t.leading,l=(d="maxWait"in t)?Math.max(Number(t.maxWait)||0,n):l,m="trailing"in t?!!t.trailing:m);function h(n){var t=o,l=r;return o=r=void 0,c=n,i=e.apply(l,t),i}function p(e){return c=e,a=window.setTimeout(g,n),u?h(e):i}function f(e){var t=e-s;return void 0===s||t>=n||t<0||d&&e-c>=l}function g(){var e=Date.now();if(f(e))return b(e);a=window.setTimeout(g,function(e){var t=e-c,o=n-(e-s);return d?Math.min(o,l-t):o}(e))}function b(e){return a=void 0,m&&o?h(e):(o=r=void 0,i)}function v(){var e=Date.now(),t=f(e);if(o=arguments,r=this,s=e,t){if(void 0===a)return p(s);if(d)return clearTimeout(a),a=window.setTimeout(g,n),h(s)}return void 0===a&&(a=window.setTimeout(g,n)),i}return v.cancel=function(){void 0!==a&&clearTimeout(a);c=0,o=s=r=a=void 0},v.flush=function(){return void 0===a?i:b(Date.now())},v}(e=>U({type:"compile",source:e}),512);const Q=s((function({hoverEl:e}){var n;const t="computed-".length,o=e&&[...e.classList].filter(e=>e.startsWith("computed-")).map(e=>Number(e.slice(t)));let r=null;(o||[]).forEach(e=>{const n=B.computedMarks[e];if(null==r)return void(r={mark:n,index:e});const{from:t,to:o}=r.mark.find(),{from:l,to:i}=n.find(),a=f(o,i);(0===a?-f(t,l):a)>0&&(r={mark:n,index:e})});const l=null!==(n=null==r?void 0:r.index)&&void 0!==n?n:null;l!=B.hoverIndex&&(null!=B.hoverIndex&&u(V,"hover-"+B.hoverIndex),null!=l&&c(V,"hover-"+l)),B.hoverIndex=l})),Z=s((function({error:e}){B.errorMark&&B.errorMark.clear(),B.errorContextMark&&B.errorContextMark.clear(),null!=e&&(B.errorMark=oe(e,"compilation-error"),B.errorContextMark=oe({start:{...e.start,ch:0},end:{...e.end,ch:C.getLine(e.end.line).length}},"compilation-error"))})),ee=s((function({elaboration:e}){B.mark&&B.mark.clear(),null!=e&&(B.mark=oe(e.location))})),ne=s((function({hitbox:e}){B.hoverMark&&B.hoverMark.clear(),null!=e&&null==B.computedMarks&&(B.hoverMark=oe(e,"hover-highlight"))})),te=s((function({showAll:e,editable:n}){C.setOption("readOnly",!n&&"nocursor"),e?c(V,"show-all-computed"):u(V,"show-all-computed")}));function oe(e,n="highlighted"){return C.markText(e.start,e.end,{className:n})}}]);